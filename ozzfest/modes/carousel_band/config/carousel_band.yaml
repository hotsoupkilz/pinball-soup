#config_version=6

mode:
  start_events: ball_starting
  stop_events: carousel_band_item_selected, ball_will_end
  priority: 120
  code: mpf.modes.carousel.code.carousel.Carousel

mode_settings:
  selectable_items:
    - meatloaf
    - dio
    - zombie
    - rivers
    - ozzy
  next_item_events: s_magnasave_button_right_active
  previous_item_events: s_magnasave_button_left_active
  select_item_events: combo_magnasave_both, s_playfield_entry_gate_active

slide_player:
  mode_carousel_band_started:
    carousel_band_meatloaf:
      action: play
      priority: 120
  carousel_item_highlighted{item=="dio"}:
    carousel_band_meatloaf:
      action: remove
    carousel_band_zombie:
      action: remove
    carousel_band_rivers:
      action: remove
    carousel_band_ozzy:
      action: remove
    carousel_band_dio:
      action: play
      priority: 120
  carousel_item_highlighted{item=="zombie"}:
    carousel_band_meatloaf:
      action: remove
    carousel_band_dio:
      action: remove
    carousel_band_rivers:
      action: remove
    carousel_band_ozzy:
      action: remove
    carousel_band_zombie:
      action: play
      priority: 120
  carousel_item_highlighted{item=="rivers"}:
    carousel_band_meatloaf:
      action: remove
    carousel_band_dio:
      action: remove
    carousel_band_zombie:
      action: remove
    carousel_band_ozzy:
      action: remove
    carousel_band_rivers:
      action: play
      priority: 120
  carousel_item_highlighted{item=="ozzy"}:
    carousel_band_meatloaf:
      action: remove
    carousel_band_dio:
      action: remove
    carousel_band_zombie:
      action: remove
    carousel_band_rivers:
      action: remove
    carousel_band_ozzy:
      action: play
      priority: 120
  carousel_item_highlighted{item=="meatloaf"}:
    carousel_band_dio:
      action: remove
    carousel_band_zombie:
      action: remove
    carousel_band_rivers:
      action: remove
    carousel_band_ozzy:
      action: remove
    carousel_band_meatloaf:
      action: play
      priority: 120
  carousel_band_item_selected:
    carousel_band_meatloaf:
      action: remove
    carousel_band_dio:
      action: remove
    carousel_band_zombie:
      action: remove
    carousel_band_rivers:
      action: remove
    carousel_band_ozzy:
      action: remove

hardware_sound_player:
  # No explicit stop needed - play_file on same track automatically replaces current playback
  carousel_item_highlighted{item=="meatloaf"}:
    "meatloaf_bat_out_of_hell.snd":
      track: 1
      action: play_file
      platform_options:
        loop: true
  carousel_item_highlighted{item=="dio"}:
    "dio_holy_diver.snd":
      track: 1
      action: play_file
      platform_options:
        loop: true
  carousel_item_highlighted{item=="zombie"}:
    "zombie_living_dead_girl.snd":
      track: 1
      action: play_file
      platform_options:
        loop: true
  carousel_item_highlighted{item=="rivers"}:
    "rivers_dustman.snd":
      track: 1
      action: play_file
      platform_options:
        loop: true
  carousel_item_highlighted{item=="ozzy"}:
    "tenacious_the_metal.snd":
      track: 1
      action: play_file
      platform_options:
        loop: true
  # No stop on selection - band mode will take over track 1 with its own play_file

show_player:
  carousel_item_highlighted{item=="meatloaf"}:
    flash_letter_l:
      key: carousel_meatloaf_flash
      speed: 1
      loops: -1
  carousel_item_highlighted{item!="meatloaf"}:
    carousel_meatloaf_flash: stop
  carousel_item_highlighted{item=="dio"}:
    flash_letter_o:
      key: carousel_dio_flash
      speed: 1
      loops: -1
  carousel_item_highlighted{item!="dio"}:
    carousel_dio_flash: stop
  carousel_item_highlighted{item=="zombie"}:
    flash_letter_r:
      key: carousel_zombie_flash
      speed: 1
      loops: -1
  carousel_item_highlighted{item!="zombie"}:
    carousel_zombie_flash: stop
  carousel_item_highlighted{item=="rivers"}:
    flash_letter_d:
      key: carousel_rivers_flash
      speed: 1
      loops: -1
  carousel_item_highlighted{item!="rivers"}:
    carousel_rivers_flash: stop
  carousel_band_item_selected:
    carousel_meatloaf_flash: stop
    carousel_dio_flash: stop
    carousel_zombie_flash: stop
    carousel_rivers_flash: stop

event_player:
  carousel_band_item_selected{selected_item=="meatloaf"}:
    - start_mode_meatloaf
  carousel_band_item_selected{selected_item=="dio"}:
    - start_mode_dio
  carousel_band_item_selected{selected_item=="zombie"}:
    - start_mode_zombie
  carousel_band_item_selected{selected_item=="rivers"}:
    - start_mode_rivers
  carousel_band_item_selected{selected_item=="ozzy"}:
    - start_mode_ozzy
  carousel_band_item_selected:
    - balldevice_bd_kickout_hole_upper_eject_ball

